<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TIDEA - Organisation Made Magical</title>

  <link rel="icon" type="image/png" href="/favicon.png" />

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/feather-icons"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#B85C38',
            secondary: '#5C4D3B',
            background: '#F7F3EF'
          }
        }
      }
    }
  </script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
    body { font-family: 'Inter', sans-serif; background-color: #F7F3EF; }
    .gradient-text { color: #B85C38; }
    .feature-card:hover { transform: translateY(-5px); box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04); }
    .transition-all { transition: all 0.3s ease-in-out; }
  </style>
</head>
<body class="bg-white text-gray-800 antialiased">

  <!-- Toasts -->
  <div id="toast-host" class="fixed top-4 right-4 z-[70] space-y-2"></div>

  <!-- Navigation -->
  <nav class="fixed w-full bg-white/90 backdrop-blur-md z-50 border-b border-gray-100">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center h-16">
        <div class="flex items-center space-x-2">
          <img src="/logo.png" alt="TIDEA Logo" class="h-10" />
        </div>
        <div class="hidden md:flex items-center space-x-8">
          <a href="#features" class="text-gray-600 hover:text-primary transition-colors">Features</a>
          <a href="#inspiration" class="text-gray-600 hover:text-primary transition-colors">Inspiration</a>
          <a href="#blog" class="text-gray-600 hover:text-primary transition-colors">Blog</a>
          <a href="#support" class="text-gray-600 hover:text-primary transition-colors">App Support</a>
          <a href="#download" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-[#9b4a2d] transition-colors font-medium">Download App</a>
        </div>
        <button class="md:hidden" aria-label="Open menu">
          <i data-feather="menu" class="text-gray-600"></i>
        </button>
      </div>
    </div>
  </nav>

  <!-- Hero -->
  <section id="hero" class="min-h-screen flex items-center justify-center relative overflow-hidden pt-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10 py-20">
      <img src="/logo.png" alt="TIDEA Logo" class="h-16 mx-auto mb-6" />
      <div class="inline-flex items-center px-4 py-1 rounded-full bg-primary/10 border border-primary/20 text-primary text-sm font-medium mb-8">
        <i data-feather="zap" class="w-4 h-4 mr-2"></i> Test Our Demo
      </div>
      <h1 class="text-4xl md:text-6xl font-bold mb-8 px-4">
        Organise Your Home with <br />
        <span class="gradient-text">Augmented Reality</span>
      </h1>
      <p class="text-xl text-gray-600 mb-10 max-w-3xl mx-auto px-4">
        TIDEA helps you visualise and find products that perfectly fit your drawers, cupboards, and every unique space in your home.
        <br /><br />
        Organisation, made magical.
      </p>
     <div class="flex flex-col items-center gap-6">
  <!-- Download -->
      <a href="https://apps.apple.com/app/tidea/id6753593487" target="_blank" rel="noopener noreferrer">
        <img
          src="https://developer.apple.com/assets/elements/badges/download-on-the-app-store.svg"
          alt="Download on the App Store"
          class="h-12 hover:opacity-90 transition-opacity"
        />
      </a>
    
  <!-- Newsletter signup -->
      <form id="newsletter-form" class="flex flex-col sm:flex-row gap-2 w-full max-w-md" action="/thank-you.html" method="POST">
        <input type="email" name="email" placeholder="Your email address" required
               class="flex-grow px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" />
        <button type="submit" class="bg-primary text-white px-6 py-3 rounded-lg hover:bg-[#9b4a2d] transition-colors font-medium whitespace-nowrap">
          Subscribe
        </button>
      </form>
      <p class="text-sm text-gray-500">Get product news, releases, and tips. You can unsubscribe anytime.</p>
    </div>

    <div class="absolute bottom-10 left-1/2 transform -translate-x-1/2 animate-bounce" aria-hidden="true">
      <i data-feather="chevron-down" class="text-gray-400"></i>
    </div>
  </section>

  <!-- Features -->
  <section id="features" class="py-20 bg-gray-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-16">
        <h2 class="text-3xl md:text-4xl font-bold mb-4">How TIDEA Transforms Your Space</h2>
        <p class="text-gray-600 max-w-2xl mx-auto">Make home organisation intuitive, efficient, and surprisingly fun.</p>
      </div>
      <div class="grid md:grid-cols-3 gap-8">
        <div class="feature-card bg-white p-8 rounded-2xl shadow-lg transition-all">
          <div class="w-14 h-14 bg-primary/10 rounded-xl flex items-center justify-center mb-6">
            <i data-feather="maximize" class="text-primary w-7 h-7"></i>
          </div>
          <h3 class="text-xl font-semibold mb-3">AR Product Fit Visualisation</h3>
          <p class="text-gray-600">See how organisers and furniture will look and fit in your space before you buy.</p>
        </div>
        <div class="feature-card bg-white p-8 rounded-2xl shadow-lg transition-all">
          <div class="w-14 h-14 bg-primary/10 rounded-xl flex items-center justify-center mb-6">
            <i data-feather="zap" class="text-primary w-7 h-7"></i>
          </div>
          <h3 class="text-xl font-semibold mb-3">Smart Organisation Inspiration</h3>
          <p class="text-gray-600">Ideas tailored for each area of your home—from pantry to home office.</p>
        </div>
        <div class="feature-card bg-white p-8 rounded-2xl shadow-lg transition-all">
          <div class="w-14 h-14 bg-primary/10 rounded-xl flex items-center justify-center mb-6">
            <i data-feather="edit-3" class="text-primary w-7 h-7"></i>
          </div>
          <h3 class="text-xl font-semibold mb-3">Expert Reviews & Trends</h3>
          <p class="text-gray-600">Honest product reviews, practical guides, and the latest storage trends.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- App Screenshots -->
  <section id="screenshots" class="py-16 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-8">
        <h2 class="text-3xl md:text-4xl font-bold">App Preview</h2>
        <a href="#" class="text-primary hover:underline text-sm inline-block mt-2">Join TestFlight (Register for invite)</a>
      </div>

      <div class="grid grid-cols-2 md:grid-cols-3 gap-6">
        <img src="/home.png" alt="TIDEA home screen" class="rounded-2xl border border-gray-200 shadow-sm">
        <img src="/Describe.png" alt="Describe your space screen" class="rounded-2xl border border-gray-200 shadow-sm">
        <img src="/scan.png" alt="AR scan flow" class="rounded-2xl border border-gray-200 shadow-sm">
        <img src="/Results.png" alt="Results with suggestions" class="rounded-2xl border border-gray-200 shadow-sm">
        <img src="/Inspiration.png" alt="Product details" class="rounded-2xl border border-gray-200 shadow-sm">
        <img src="/blog.png" alt="Blog" class="rounded-2xl border border-gray-200 shadow-sm">
      </div>

      <p class="text-sm text-gray-500 mt-4 text-center">Screenshots are from an MVP build. Features and UI may change.</p>
    </div>
  </section>

<!-- Inspiration Preview -->
<section id="inspiration" class="py-20">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-16">
      <h2 class="text-3xl md:text-4xl font-bold mb-4">A Glimpse of Inspiration</h2>
      <p class="text-gray-600 max-w-2xl mx-auto">Discover how TIDEA can help you reimagine every corner of your home.</p>
    </div>

    <!-- Each tile links to a real page with a query param -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
      <a href="/inspiration.html?category=kitchen" class="group relative overflow-hidden rounded-2xl h-64 block">
        <img src="/kitchen.jpg" alt="Kitchen Organisation" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500" />
        <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent flex items-end p-6">
          <h4 class="text-white font-semibold text-lg">Kitchen &amp; Pantry</h4>
        </div>
      </a>

      <a href="/inspiration.html?category=bedroom" class="group relative overflow-hidden rounded-2xl h-64 block">
        <img src="/bedroom.jpg" alt="Bedroom" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500" />
        <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent flex items-end p-6">
          <h4 class="text-white font-semibold text-lg">Bedroom</h4>
        </div>
      </a>

      <a href="/inspiration.html?category=utility" class="group relative overflow-hidden rounded-2xl h-64 block">
        <img src="/utility.jpg" alt="Utility Room" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500" />
        <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent flex items-end p-6">
          <h4 class="text-white font-semibold text-lg">Utility Room</h4>
        </div>
      </a>

      <a href="/inspiration.html?category=underbed" class="group relative overflow-hidden rounded-2xl h-64 block">
        <img src="/underbed.jpg" alt="Underbed Storage" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500" />
        <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent flex items-end p-6">
          <h4 class="text-white font-semibold text-lg">Underbed Storage</h4>
        </div>
      </a>
    </div>
  </div>
</section>

  <!-- Blog -->
  <section id="blog" class="py-20 bg-gray-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-16">
        <h2 class="text-3xl md:text-4xl font-bold mb-4">From Our Blog</h2>
        <p class="text-gray-600 max-w-2xl mx-auto">Tips, reviews, and trends in home organisation.</p>
      </div>
      <div id="blog-grid" class="grid md:grid-cols-3 gap-8"></div>
    </div>
  </section>

<section id="newsletter" class="py-20 bg-gradient-to-br from-primary to-secondary">
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-white">
    <h2 class="text-3xl md:text-4xl font-bold mb-4">Stay in the Loop</h2>
    <p class="text-xl text-white/90 mb-8 max-w-2xl mx-auto">
      Subscribe for updates, feature drops, and organisation tips.
    </p>
    <form id="newsletter-form-2" class="flex flex-col sm:flex-row gap-2 justify-center items-center max-w-md mx-auto" action="/thank-you.html" method="POST">
      <input type="email" name="email" placeholder="Your email address" required
             class="flex-grow px-4 py-3 rounded-lg border border-white/30 bg-white/20 text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-white focus:border-transparent" />
      <button type="submit" class="bg-white text-primary px-6 py-3 rounded-lg hover:bg-gray-100 transition-colors font-medium whitespace-nowrap font-semibold">
        Subscribe
      </button>
    </form>
    <p class="text-sm text-white/70 mt-4">We’ll only email you when it matters.</p>

    <!-- App Store button (optional duplicate here) -->
    <div class="mt-8">
      <a href="https://apps.apple.com/app/tidea/id6753593487" target="_blank" rel="noopener noreferrer">
        <img
          src="https://developer.apple.com/assets/elements/badges/download-on-the-app-store.svg"
          alt="Download on the App Store"
          class="h-12 mx-auto hover:opacity-90 transition-opacity"
        />
      </a>
    </div>
  </div>
</section>

  <!-- App Privacy Summary -->
  <section id="privacy-summary" class="py-16 bg-gray-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl md:text-4xl font-bold mb-4 text-center">App Privacy Summary</h2>
      <div class="bg-white border border-gray-200 rounded-2xl p-6">
        <ul class="space-y-3 text-gray-700 text-left">
          <li><span class="font-semibold">Data collected:</span> Email (testflight/newsletter only).</li>
          <li><span class="font-semibold">Purpose:</span> Updates, early access, and announcements.</li>
          <li><span class="font-semibold">Sharing:</span> We do <em>not</em> sell your data. Limited processing by trusted providers (e.g., Netlify, Mailchimp).</li>
          <li><span class="font-semibold">Control:</span> You can unsubscribe any time via email footer or by contacting <a href="mailto:hello@tidea.app" class="underline text-primary">hello@tidea.app</a>.</li>
        </ul>
        <p class="text-sm text-gray-500 mt-4 text-left">
          Full details in our <a href="/privacy.html" class="underline text-primary">Privacy Policy</a>.
        </p>
      </div>
    </div>
  </section>

  <!-- App Support -->
  <section id="support" class="py-16 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl md:text-4xl font-bold mb-4 text-center">App Support</h2>
      <div class="bg-white border border-gray-200 rounded-2xl p-6">
        <p class="text-gray-700 text-left">
          Need help or want to share feedback? Email us at
          <a href="mailto:hello@tidea.app" class="underline text-primary">hello@tidea.app</a>
          and we’ll get back to you.
        </p>
        <ul class="list-disc pl-6 mt-4 text-gray-700 text-left">
          <li>Report a bug</li>
          <li>Suggest a feature</li>
          <li>Press & partnership enquiries</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-gray-900 text-white py-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex flex-col md:flex-row justify-between items-center">
        <div class="flex items-center space-x-2 mb-4 md:mb-0">
          <img src="/logo.png" alt="TIDEA Logo" class="h-10" />
        </div>
        <p class="text-gray-400 text-sm">© <span id="year"></span> TIDEA. Organisation, Made Magical. All rights reserved.</p>
        <div class="flex space-x-6 mt-4 md:mt-0 text-sm">
          <a href="/privacy.html" class="text-gray-400 hover:text-white">Privacy Policy</a>
          <a href="/terms.html" class="text-gray-400 hover:text-white">Terms of Service</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- Cookie Consent -->
  <div id="cookie-banner" class="fixed inset-x-0 bottom-0 z-[60] hidden">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-6">
      <div class="bg-white border border-gray-200 rounded-xl shadow-xl px-5 py-4 flex flex-col md:flex-row md:items-center md:justify-between gap-3">
        <p class="text-sm text-gray-700">
          We use cookies for site performance and basic analytics. By clicking “Accept”, you agree to our use of cookies.
          Read our <a href="/privacy.html" class="underline text-primary">Privacy Policy</a>.
        </p>
        <div class="flex gap-3 justify-end">
          <button id="cookie-decline" class="px-4 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50 text-sm">Decline</button>
          <button id="cookie-accept" class="px-4 py-2 rounded-lg bg-primary text-white hover:bg-[#9b4a2d] text-sm font-semibold">Accept</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Supabase client -->
  <script src="https://unpkg.com/@supabase/supabase-js@2/dist/umd/supabase.js"></script>

  <script>
    // Icons + year
    feather.replace();
    document.getElementById('year').textContent = new Date().getFullYear();

    // Cookie banner logic
    (function () {
      var KEY = 'tidea_cookie_consent_v1';
      var banner = document.getElementById('cookie-banner');
      if (!localStorage.getItem(KEY)) banner.classList.remove('hidden');
      document.getElementById('cookie-accept').onclick = () => { localStorage.setItem(KEY, 'accepted'); banner.classList.add('hidden'); };
      document.getElementById('cookie-decline').onclick = () => { localStorage.setItem(KEY, 'declined'); banner.classList.add('hidden'); };
    })();

    function showToast(message, type = 'info') {
      const host = document.getElementById('toast-host');
      const base = 'rounded-lg px-4 py-3 shadow-lg border flex items-start gap-3';
      const styles = {
        success: 'bg-white border-green-200 text-green-800',
        error:   'bg-white border-red-200 text-red-800',
        info:    'bg-white border-gray-200 text-gray-800',
        warn:    'bg-white border-yellow-200 text-yellow-800'
      };
      const icon = { success: 'check-circle', error: 'alert-triangle', info: 'info', warn: 'alert-circle' }[type] || 'info';

      const el = document.createElement('div');
      el.className = base + ' ' + (styles[type] || styles.info);
      el.innerHTML = `
        <span class="mt-0.5"><i data-feather="${icon}"></i></span>
        <div class="text-sm leading-snug">${message}</div>
        <button class="ml-3 text-xs opacity-70 hover:opacity-100">Dismiss</button>
      `;
      host.appendChild(el);
      feather.replace({ 'aria-hidden': 'true' });
      const remove = () => { el.classList.add('opacity-0','transition','duration-200'); setTimeout(() => el.remove(), 220); };
      el.querySelector('button')?.addEventListener('click', remove);
      setTimeout(remove, 3500);
    }

    // Supabase client
    const SUPABASE_URL = 'https://hciergtglghsfezgkkni.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhjaWVyZ3RnbGdoc2Zlemdra25pIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY4NDMzOTQsImV4cCI6MjA3MjQxOTM5NH0.xyC-7gDbRh0OfZRxtTNOfVEHw0Kh0JBfDCqYcIC1POs';
    const _supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    // Escaper
    function esc(s) {
      return String(s || '')
        .replace(/&/g, '&amp;')
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;')
        .replace(/"/g, '&quot;');
    }

    function isPublished(v) {
      if (v === true) return true;
      if (typeof v === 'string') { const s = v.trim().toLowerCase(); return s === 'true' || s === 't' || s === '1' || s === 'yes'; }
      if (typeof v === 'number') return v === 1;
      return false;
    }

    // Blog cards (unchanged logic you already had working)
    async function loadBlogCards() {
      const grid = document.getElementById('blog-grid');
      if (!grid) return;
      try {
        let query = _supabase
          .from('blog_posts')
          .select('slug,title,excerpt,cover_image_url,published,created_at,published_at')
          .order('published_at', { ascending: false });

        const { data, error } = await query.limit(12);
        if (error || !Array.isArray(data)) return;

        const rows = data.filter(r => isPublished(r.published)).slice(0, 3);
        if (!rows.length) {
          grid.innerHTML = `<div class="col-span-3 text-center text-gray-500">No published posts yet.</div>`;
          return;
        }

        const cards = rows.map((post) => {
          const img = esc(post.cover_image_url || '/Pantry.jpg');
          const title = esc(post.title || 'Untitled');
          const excerpt = esc(post.excerpt || '');
          const href = post.slug ? `/post.html?slug=${encodeURIComponent(post.slug)}` : '#';
          return `
            <article class="bg-white rounded-2xl shadow-lg overflow-hidden transition-all hover:shadow-xl">
              <img src="${img}" alt="${title}" class="w-full h-48 object-cover" />
              <div class="p-6">
                <h3 class="font-semibold text-lg mt-2 mb-3">${title}</h3>
                <p class="text-gray-600 text-sm mb-3">${excerpt}</p>
                <a href="${href}" class="text-primary font-semibold text-sm hover:underline">Read More →</a>
              </div>
            </article>
          `;
        }).join('');
        grid.innerHTML = cards;
      } catch {}
    }

    document.addEventListener('DOMContentLoaded', loadBlogCards);

    // TestFlight forms → Supabase waitlist table
    document.querySelectorAll('form[action="/thank-you.html"]').forEach((form) => {
      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        const emailInput = form.querySelector('input[type="email"]');
        const btn = form.querySelector('button[type="submit"]');
        const email = (emailInput?.value || '').trim();

        const ok = /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/.test(email);
        if (!ok) { showToast('Please enter a valid email address.', 'warn'); emailInput?.focus(); return; }

        const originalLabel = btn.textContent;
        btn.disabled = true; btn.textContent = 'Adding…';

        const source = form.id === 'testflight-form' ? 'hero'
                     : form.id === 'testflight-form-2' ? 'footer'
                     : 'unknown';

        try {
          const { error } = await _supabase.from('waitlist').insert({ email, source, ua: navigator.userAgent || '' });
          if (error) {
            let message = 'Could not save your email. Please try again.';
            const emsg = (error.message || '').toLowerCase();
            if (emsg.includes('duplicate key') || emsg.includes('unique constraint')) {
              message = 'You’re already on the waiting list!'; showToast(message, 'info');
            } else { showToast(message, 'error'); }
            btn.disabled = false; btn.textContent = originalLabel; return;
          }
          window.location.href = '/thank-you.html';
        } catch {
          showToast('Network error. Please try again.', 'error');
          btn.disabled = false; btn.textContent = originalLabel;
        }
      });
    });
  </script>
</body>
</html>
