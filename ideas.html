<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Ideas — TIDEA</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" type="image/png" href="/favicon.png" />
  <style>
    :root {
      --bg: #FAF9F7; --text: #2B2B2B; --muted: #6B6B6B;
      --card: #FFFFFF; --border: #E9E4DF; --accent: #B85C38; --accent-hover: #9b4a2d;
    }
    body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, Inter, sans-serif; margin: 0; background: var(--bg); color: var(--text); }
    .wrap { max-width: 1100px; margin: 0 auto; padding: 28px 20px 80px; }
    header { text-align: center; padding: 38px 0 10px; }
    h1 { font-size: 2.1rem; margin: 0 0 6px; }
    .sub { color: var(--muted); }
    .disclosure { background: #fff; border: 1px solid var(--border); border-radius: 10px; padding: 10px 14px; margin: 16px auto 10px; font-size: .92rem; color: var(--muted); max-width: 900px;}
    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 16px; margin-top: 18px; }
    .card { background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 12px; }
    .img { width: 100%; height: 170px; object-fit: cover; border-radius: 10px; background:#eee; }
    .title { font-size: 1.05rem; font-weight: 800; margin: 10px 0 6px; }
    .desc { color: var(--muted); margin: 0 0 10px; }
    .supplier { color: var(--muted); font-size: 0.95rem; margin: 0 0 8px; }
    .row { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
    .btn { background: var(--accent); color: #fff; border: none; border-radius: 8px; padding: 9px 12px; font-weight: 700; cursor: pointer; text-decoration: none; display: inline-block; }
    .btn:hover { background: var(--accent-hover); }
    .btn-outline { background: transparent; color: var(--accent); border: 1px solid var(--accent); border-radius: 8px; padding: 9px 12px; font-weight: 700; text-decoration: none; display: inline-block; }
    .price { margin-left: auto; color: var(--muted); font-weight: 700; }
    .back { margin: 10px 0 0; display:inline-block; text-decoration:none; color: var(--accent); }
    footer { text-align: center; margin-top: 28px; color: var(--muted); font-size: 0.9rem; }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1 id="title">Ideas</h1>
      <div class="sub">Curated inspiration with real products that fit.</div>
      <a class="back" href="/index.html">← Back to Home</a>
    </header>

    <div class="disclosure">
      Some links on this page may be affiliate links. If you buy through them, we may earn a small commission at no extra cost to you.
    </div>

    <main>
      <div id="grid" class="grid"></div>
    </main>

    <footer>
      <p>© <span id="year"></span> TIDEA • <a href="/privacy.html">Privacy</a> • <a href="/terms.html">Terms</a></p>
    </footer>
  </div>

  <!-- Supabase -->
  <script src="https://unpkg.com/@supabase/supabase-js@2/dist/umd/supabase.js"></script>
  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    const SUPABASE_URL = 'https://hciergtglghsfezgkkni.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhjaWVyZ3RnbGdoc2Zlemdra25pIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY4NDMzOTQsImV4cCI6MjA3MjQxOTM5NH0.xyC-7gDbRh0OfZRxtTNOfVEHw0Kh0JBfDCqYcIC1POs';
    const _supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    function esc(s){return String(s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;')}

    // --- Helpers ported from your app logic ---
    function normalizeTags(input){
      if (!input) return [];
      if (Array.isArray(input)) return input.map(t => String(t ?? '').trim().toLowerCase()).filter(Boolean);
      const s = String(input).trim();
      if (s.startsWith('[')) {
        try { const arr = JSON.parse(s); return Array.isArray(arr) ? arr.map(t => String(t ?? '').trim().toLowerCase()).filter(Boolean) : []; }
        catch { return []; }
      }
      if (s.startsWith('{') && s.endsWith('}')) {
        return s.slice(1, -1).split(',').map(t => t.replace(/"/g, '').trim().toLowerCase()).filter(Boolean);
      }
      return [s.toLowerCase()];
    }
    function normalizeUrl(u){ if (!u) return null; return /^https?:\/\//i.test(u) ? u : `https://${u}`; }
    function formatPrice(amount, currency){
      if (amount == null) return null;
      const code = (currency || 'GBP').toUpperCase();
      try { return new Intl.NumberFormat('en-GB',{style:'currency',currency:code}).format(Number(amount)); }
      catch { const symbol = code==='GBP'?'£':''; return `${symbol}${Number(amount).toFixed(2)}${symbol?'':`
